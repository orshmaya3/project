
{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">

  <h1 class="mb-4 text-center">
       砖专 - 转转 爪专 
    <img src="https://cdn-icons-png.flaticon.com/512/447/447031.png" alt="Icon" width="35">
  </h1>

<a href="{{ url_for('production.export_excel') }}" class="btn btn-outline-success d-flex align-items-center gap-2 mb-3" style="width: fit-content;">
  <img src="https://cdn-icons-png.flaticon.com/512/732/732220.png" alt="Excel Icon" width="24" height="24">
  爪 拽住
</a>



  <!--  驻住 住 -->
  <form method="get" class="mb-4">
    <div class="row g-2">
      <div class="col-md-2">
        <label>住住:</label>
        <select name="status" class="form-select">
          <option value=""></option>
          <option value="转">转</option>
          <option value="爪专">爪专</option>
          <option value="转 拽专转 转">转 拽专转 转</option>
          <option value="注专 拽专转 转">注专 拽专转 转</option>
          <option value="  砖 拽专转 转 "> 砖 拽专转 转</option>
          <option value="爪注">爪注</option>
        </select>
      </div>
      <div class="col-md-2">
        <label>注驻转:</label>
        <select name="priority" class="form-select">
          <option value=""></option>
          <option value=""></option>
          <option value="转">转</option>
          <option value=""></option>
        </select>
      </div>
      <div class="col-md-2">
        <label>转专:</label>
        <input type="date" name="from_date" class="form-control">
      </div>
      <div class="col-md-2">
        <label>注 转专:</label>
        <input type="date" name="to_date" class="form-control">
      </div>
      <div class="col-md-2">
        <label>拽:</label>
        <input type="text" name="customer" class="form-control">
      </div>
      <div class="col-md-2 align-self-end">
        <button type="submit" class="btn btn-primary w-100">住</button>
      </div>
    </div>
  </form>

  <!--   -->
  <table class="table table-bordered table-striped shadow-sm">
    <thead class="table-light">
      <tr>
        <th>ID</th>
        <th>转专</th>
        <th>转</th>
        <th>住住</th>
        <th>注专转</th>
        <th>拽</th>
        <th>注驻转</th>
        {% if session['role'] == 'admin' %}
        <th>注专</th>
        {% endif %}
      </tr>
    </thead>
    <tbody>
      {% for plan in plans %}
      <tr>
        <td>{{ plan.id }}</td>
        <td>{{ plan.date }}</td>
        <td>{{ plan.quantity }}</td>
        <td>
          <select class="form-select form-select-sm quick-status" data-id="{{ plan.id }}">
            <option value="转" {% if plan.status == '转' %}selected{% endif %}>转</option>
            <option value="爪专" {% if plan.status == '爪专' %}selected{% endif %}>爪专</option>
            <option value="转 拽专转 转" {% if plan.status == '转 拽专转 转' %}selected{% endif %}>转 拽专转 转</option>
             <option value="砖 拽专转 转" {% if plan.status == '砖 拽专转 转' %}selected{% endif %}>砖 拽专转 转</option>
            <option value="注专 拽专转 转" {% if plan.status == '注专 拽专转 转' %}selected{% endif %}>注专 拽专转 转</option>
            <option value="爪注" {% if plan.status == '爪注' %}selected{% endif %}>爪注</option>
          </select>
        </td>
        <td>{{ plan.notes }}</td>
        <td>{{ plan.customer }}</td>
        <td>{{ plan.priority }}</td>

        {% if session['role'] == 'admin' %}
        <td>
          <a href="/edit/{{ plan.id }}" class="btn btn-outline-secondary btn-sm">锔 注专</a>

             <form method="POST" action="/api/production/delete/{{ plan.id }}"
              onsubmit="return confirm(' 转  砖专爪 拽 转 转转?')"
              style="display:inline-block; margin-right: 5px;">
          <button type="submit" class="btn btn-sm btn-danger"> 拽</button>
        </form>

        </td>
        {% endif %}
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/production_dashboard.js') }}"></script>
{% endblock %}